"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[335],{80335:function(e,n,t){t.r(n),t.d(n,{default:function(){return W}});var a=t(1413),r=t(29439),i=t(63738),s=t(47619),o=t(69649),l=t(24193),c=t(65280),d=t(82294),u=t(61113),m=t(23132),f=t(73997),h=t(47313),x=t(22408),p=t(29466),g=t(97890),j=t(58970),v=t(75627),Z=t(14790),y=t(6473),b=t(38768),w=t(24511),k=t(60890),N=t(53082),I=t(19860),z=t(56993),C=t(46417);var F=function(e){var n=e.name,t=e.maintenanceData,r=e.images,i=(0,w.$)("forkliftsPage").t,s=(0,x.I0)(),o=(0,v.Gc)(),c=o.formState,d=(o.watch,o.getValues,c.isValid),m=c.dirtyFields,h=(0,I.Z)(),Z=(0,g.s0)();return(0,C.jsxs)("div",{className:"flex flex-col sm:flex-row flex-1 w-full items-center justify-between space-y-8 sm:space-y-0 py-32 px-24 md:px-32",children:[(0,C.jsxs)("div",{className:"flex flex-col items-center sm:items-start space-y-8 sm:space-y-0 w-full sm:max-w-full min-w-0",children:[(0,C.jsx)(f.E.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1,transition:{delay:.3}},children:(0,C.jsxs)(u.Z,{className:"flex items-center sm:mb-12",component:p.rU,role:"button",to:"/maintenance/check",color:"inherit",children:[(0,C.jsx)(z.Z,{size:20,children:"ltr"===h.direction?"heroicons-outline:arrow-sm-left":"heroicons-outline:arrow-sm-right"}),(0,C.jsx)("span",{className:"flex mx-4 font-medium",children:"Targonc\xe1k"})]})}),(0,C.jsx)("div",{className:"flex items-center max-w-full",children:(0,C.jsxs)(f.E.div,{className:"flex flex-col items-center sm:items-start min-w-0 mx-8 sm:mx-16",initial:{x:-20},animate:{x:0,transition:{delay:.3}},children:[(0,C.jsx)(u.Z,{className:"text-16 sm:text-20 truncate font-semibold",children:n}),(0,C.jsx)(u.Z,{variant:"caption",className:"font-medium",children:"Targonca ellen\u0151rz\xe9se"})]})})]}),(0,C.jsx)(f.E.div,{className:"flex",initial:{opacity:0,x:20},animate:{opacity:1,x:0,transition:{delay:.3}},children:(0,C.jsx)(l.Z,{className:"whitespace-nowrap mx-4",variant:"contained",color:"secondary",disabled:j.Z.isEmpty(m)||!d,onClick:function(){s((0,k.qR)((0,a.Z)((0,a.Z)({},t),{},{images:r}))).then((function(e){e.payload&&Z("/maintenance/home")}))},children:i("SAVE")})})]})},S=t(93433),_=t(15861),D=t(87757),E=t.n(D),T=t(31427),P=t(69850),R=t(88564),V=t(17551),K=t(83061),M=t(9506),$=t(15202),q=t(33604),G=t(96467),U=t(97762),A=t(4117),B=(0,R.ZP)("div")((function(e){var n=e.theme;return{"& .productImageFeaturedStar":{position:"absolute",color:P.Z[400],opacity:0},"& .productImageUpload":{transitionProperty:"box-shadow",transitionDuration:n.transitions.duration.short,transitionTimingFunction:n.transitions.easing.easeInOut},"& .productImageItem":{transitionProperty:"box-shadow",transitionDuration:n.transitions.duration.short,transitionTimingFunction:n.transitions.easing.easeInOut,"&:hover":{opacity:.5,"& .productImageFeaturedStar":{opacity:1}},"&.featured":{pointerEvents:"none",boxShadow:n.shadows[3],"& .productImageFeaturedStar":{opacity:1},"&:hover .productImageFeaturedStar":{opacity:1}}}}}));var Q=function(e){var n=e.setMaintenanceData,t=(e.maintenanceData,e.images),r=e.setImages,i=(0,w.$)("tablesPage").t,s=(0,v.Gc)(),o=s.control,c=s.formState,d=(s.watch,c.errors),m=(0,x.I0)();return(0,C.jsxs)("div",{children:[(0,C.jsx)(v.Qr,{name:"description",control:o,render:function(e){var t,r=e.field;return(0,C.jsx)(T.Z,(0,a.Z)((0,a.Z)({},r),{},{multiline:!0,minRows:4,className:"mt-8 mb-16",value:r.value?r.value:"",error:!!d.description,required:!0,helperText:i(null===d||void 0===d||null===(t=d.description)||void 0===t?void 0:t.message),label:"Probl\xe9ma le\xedr\xe1sa",type:"text",id:"description",variant:"outlined",fullWidth:!0,autoFocus:!0,onChange:function(e){r.onChange(e.target.value),n((function(n){return(0,a.Z)((0,a.Z)({},n),{},{has_damage:!0,description:e.target.value})}))}}))}}),(0,C.jsxs)("div",{className:"pb-16 flex items-center",children:[(0,C.jsx)(z.Z,{color:"action",children:"heroicons-outline:camera"}),(0,C.jsx)(u.Z,{className:"h2 mx-12 font-medium",color:"text.secondary",children:"K\xe9pek"})]}),(0,C.jsx)(B,{children:(0,C.jsxs)("div",{className:"flex justify-center sm:justify-start flex-wrap -mx-16",children:[(0,C.jsx)(v.Qr,{name:"images",control:o,render:function(e){var n=e.field;n.onChange,n.value;return(0,C.jsxs)(M.Z,{sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,V.$n)(e.palette.background.default,.4):(0,V.$n)(e.palette.background.default,.02)}},component:"label",htmlFor:"button-file",className:"productImageUpload flex items-center justify-center relative w-128 h-128 rounded-16 mx-12 mb-24 overflow-hidden cursor-pointer shadow hover:shadow-lg",children:[(0,C.jsx)("input",{accept:".jpg,.jpeg,.png",className:"hidden",id:"button-file",type:"file",onChange:function(){var e=(0,_.Z)(E().mark((function e(n){var t,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return new Promise((function(e,t){var a=n.target.files[0];if(a){r((function(e){return[].concat((0,S.Z)(e),[a])}));var i=new FileReader;i.onload=function(){e("data:".concat(a.type,";base64,").concat(btoa(i.result)))},i.onerror=t,i.readAsBinaryString(a)}}))},e.next=3,t();case 3:a=e.sent,r((function(e){var n=e;return n[e.length-1].data=a,(0,S.Z)(n)}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,C.jsx)(z.Z,{size:32,color:"action",children:"heroicons-outline:upload"})]})}}),t&&(0,C.jsx)(C.Fragment,{children:t.map((function(e,n){return(0,C.jsxs)("div",{onClick:function(){m((0,$.G3)({children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(q.Z,{id:"alert-dialog-title",children:"Biztosan t\xf6r\xf6lni szeretn\xe9d a k\xe9pet?"}),(0,C.jsx)(G.Z,{children:(0,C.jsx)(U.Z,{id:"alert-dialog-description",children:"Amennyiben t\xf6rl\xf6d, a k\xe9p nem lesz benne az ellen\u0151rz\xe9si el\u0151zm\xe9nyben!"})}),(0,C.jsxs)(A.Z,{children:[(0,C.jsx)(l.Z,{onClick:function(){return m((0,$.gk)())},color:"primary",children:"M\xe9gse"}),(0,C.jsx)(l.Z,{onClick:function(){r((function(e){return e.filter((function(e,t){return t!==n}))})),m((0,$.gk)())},color:"error",autoFocus:!0,children:"T\xf6rl\xe9s"})]})]})}))},onKeyDown:function(){m((0,$.G3)({children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(q.Z,{id:"alert-dialog-title",children:"Biztosan t\xf6r\xf6lni szeretn\xe9d a k\xe9pet?"}),(0,C.jsx)(G.Z,{children:(0,C.jsx)(U.Z,{id:"alert-dialog-description",children:"Amennyiben t\xf6rl\xf6d, a k\xe9p nem lesz benne az ellen\u0151rz\xe9si el\u0151zm\xe9nyben!"})}),(0,C.jsxs)(A.Z,{children:[(0,C.jsx)(l.Z,{onClick:function(){return m((0,$.gk)())},color:"primary",children:"M\xe9gse"}),(0,C.jsx)(l.Z,{onClick:function(){r((function(e){return e.filter((function(e,t){return t!==n}))})),m((0,$.gk)())},color:"error",autoFocus:!0,children:"T\xf6rl\xe9s"})]})]})}))},role:"button",tabIndex:0,className:(0,K.Z)("productImageItem flex items-center justify-center relative w-128 h-128 rounded-16 mx-12 mb-24 overflow-hidden cursor-pointer outline-none shadow hover:shadow-lg hover:border-2 hover:border-orange-700 transition-all duration-150"),children:[(0,C.jsx)(z.Z,{className:"productImageFeaturedStar w-60 h-60",children:"heroicons-outline:trash"}),(0,C.jsx)("img",{className:"max-w-none w-auto h-full",src:e.data,alt:"img"})]},e.name)}))})]})})]})};var O=function(e){var n=e.changeTab,t=e.setMaintenanceData,r=((0,w.$)("tablesPage").t,(0,v.Gc)()),i=r.control,s=r.formState,o=r.getValues,l=(r.getFieldState,s.errors,(0,x.I0)()),c=(0,g.s0)();return(0,C.jsx)("div",{className:"flex items-center justify-center",children:(0,C.jsx)(v.Qr,{name:"hasDamage",control:i,render:function(e){var r=e.field;return(0,C.jsxs)("div",{className:"w-full h-full flex items-center justify-center gap-52",children:[(0,C.jsx)("div",(0,a.Z)((0,a.Z)({},r),{},{onClick:function(){r.value=!1;var e=o();l((0,k.qR)({forklift_id:e.id,has_damage:!1,description:null})).then((function(e){e.payload&&c("/maintenance/home")}))},onKeyDown:function(e){r.value=!1},role:"button",tabIndex:0,children:(0,C.jsx)("img",{src:"assets/images/apps/check/ok.png",alt:"paypal"})})),(0,C.jsx)("div",(0,a.Z)((0,a.Z)({},r),{},{onClick:function(){r.value=!0;var e=o();t((function(n){return(0,a.Z)((0,a.Z)({},n),{},{forklift_id:e.id,has_damage:!0})})),n(1)},onKeyDown:function(e){r.value=!0;var i=o();t((function(e){return(0,a.Z)((0,a.Z)({},e),{},{forklift_id:i.id,has_damage:!0})})),n(1)},role:"button",tabIndex:0,children:(0,C.jsx)("img",{src:"assets/images/apps/check/notok.png",alt:"paypal"})}))]})}})})},X=y.Ry().shape({hasDamage:y.Xg().required().default(!0),description:y.Z_().required("K\xf6telez\u0151 megadni a hiba le\xedr\xe1s\xe1t"),img_path:y.IX().of(y.Z_().optional())});var W=(0,m.Z)("checkTab",N.Z)((function(e){(0,w.$)("forkliftsPage").t;var n=(0,x.I0)(),t=(0,x.v9)(k.Qv),m=(0,b.Z)((function(e){return e.breakpoints.down("lg")})),y=(0,g.UO)(),N=(0,h.useState)(0),I=(0,r.Z)(N,2),z=I[0],S=I[1],_=(0,h.useState)(!1),D=(0,r.Z)(_,2),E=D[0],T=D[1],P=(0,h.useState)({forklift_id:null,has_damage:null,description:null}),R=(0,r.Z)(P,2),V=R[0],K=R[1],M=(0,h.useState)([]),$=(0,r.Z)(M,2),q=$[0],G=$[1],U=(0,v.cI)({mode:"onChange",defaultValues:{},resolver:(0,Z.X)(X)}),A=U.reset,B=U.watch,W=(U.control,U.onChange,U.formState,B());return(0,o.KW)((function(){!function(){var e=y.forkliftId;"new"===e?n((0,k.yd)()):n((0,k.R3)(e)).then((function(e){e.payload||T(!0)}))}()}),[n,y]),(0,h.useEffect)((function(){t&&A(t)}),[t,A]),(0,h.useEffect)((function(){return function(){n((0,k.ZL)()),T(!1)}}),[n]),E?(0,C.jsxs)(f.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-col flex-1 items-center justify-center h-full",children:[(0,C.jsx)(u.Z,{color:"text.secondary",variant:"h5",children:"Nincs ilyen targonca"}),(0,C.jsx)(l.Z,{className:"mt-24",component:p.rU,variant:"outlined",to:"/admin/forklifts",color:"inherit",children:"Vissza a targonc\xe1khoz"})]}):j.Z.isEmpty(W)?(0,C.jsx)(i.Z,{}):(0,C.jsx)(v.RV,(0,a.Z)((0,a.Z)({},U),{},{children:(0,C.jsx)(s.Z,{header:(0,C.jsx)(F,{name:t.name,maintenanceData:V,images:q}),content:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(d.Z,{value:z,indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64 border-b-1"},children:[(0,C.jsx)(c.Z,{className:"h-64 cursor-default",label:"\xc1llapot"}),(0,C.jsx)(c.Z,{className:"h-64 cursor-default",label:"R\xe9szletek"})]}),(0,C.jsxs)("div",{className:"p-16 sm:p-24 max-w-3xl  ".concat(0===z?"h-3/4 flex items-center justify-center":""),children:[(0,C.jsx)("div",{className:0!==z?"hidden":"",children:(0,C.jsx)(O,{setMaintenanceData:K,changeTab:S})}),(0,C.jsx)("div",{className:1!==z?"hidden":"",children:(0,C.jsx)(Q,{setMaintenanceData:K,maintenanceData:V,images:q,setImages:G})})]})]}),scroll:m?"normal":"content"})}))}))}}]);